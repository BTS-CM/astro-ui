import{d as Er,s as Sr,a as br,u as mr,l as pr,j as t,i as xr,c as Ar}from"./utils.7znXe2qs.js";import{r as E}from"./index.sXsv9c-e.js";import{u as vr,F as _r,a as ue,b as he,c as me,d as pe,f as xe,e as Ue}from"./form.IiT__thW.js";import{D as Je,e as Ve,a as He,b as Ye,c as Qe,d as Ke,C as Dr}from"./dialog.ty4DDuUr.js";import{F as Xe}from"./index.esm.AIjKFR9D.js";import{d as $e,e as yr,h as ve,f as kr}from"./common.D-iicPwN.js";import{c as Tr,e as Pr}from"./User.wBO8_z3B.js";import{n as Br,u as Ir,$ as er,a as rr,b as tr,c as sr,h as ir,i as nr}from"./Init.SOFaEcmE.js";import{C as De,a as ye,b as ke,c as Te,$ as lr,d as ar}from"./users.2JVUOKN_.js";import{S as Rr,a as Fr,b as Mr,c as Lr,d as Ce}from"./select.bLP0sma6.js";import{A as $r}from"./Avatar.FWO8QUvh.js";import{L as Ae,D as Ur}from"./DeepLinkDialog.uoSyd9DJ.js";import{E as or}from"./ExternalLink.-MmVvsi5.js";import{A as qr}from"./AssetDropDownCard.LX0oMgDW.js";import{F as Gr}from"./fuse.aCsZfKX4.js";import"./hover-card.itONTBMz.js";import{A as cr,a as fr}from"./avatar.sdxR5U9e.js";import{I as te}from"./input.HaIIg_lG.js";import{B as le}from"./button.aE--GSfB.js";import{a as zr}from"./separator.X1FQtr6k.js";import{P as Pe,a as Be,b as Ie}from"./popover.LuoIuqTw.js";import{A as Jr}from"./AccountSearch._di7praH.js";import{f as Vr,C as Hr}from"./calendar.kQAUUh_S.js";import{S as Xr}from"./scroll-area.EYovid3t.js";import"./index.zSBU31wW.js";import"./index.QjywInIh.js";import"./index.F5qScCsY.js";import"./index.l8a4wIXM.js";import"./index.f2GGseSc.js";import"./index.bEc6I5NQ.js";import"./index.1Sp87CHV.js";var Wr=/^-?(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?$/i,qe=Math.ceil,ae=Math.floor,ee="[BigNumber Error] ",dr=ee+"Number primitive has more than 15 significant digits: ",ge=1e14,S=14,Ge=9007199254740991,ze=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9,1e10,1e11,1e12,1e13],Ee=1e7,H=1e9;function gr(e){var r,t,s,n,i,a=E.prototype={constructor:E,toString:null,valueOf:null},l=new E(1),o=20,c=4,d=-7,u=21,f=-1e7,h=1e7,m=!1,p=1,x=0,g={prefix:"",groupSize:3,secondaryGroupSize:0,groupSeparator:",",decimalSeparator:".",fractionGroupSize:0,fractionGroupSeparator:" ",suffix:""},j="0123456789abcdefghijklmnopqrstuvwxyz",b=!0;function E(e,r){var n,i,a,l,d,u,m,p,x=this;if(!(x instanceof E))return new E(e,r);if(null==r){if(e&&!0===e._isBigNumber)return x.s=e.s,void(!e.c||e.e>h?x.c=x.e=null:e.e<f?x.c=[x.e=0]:(x.e=e.e,x.c=e.c.slice()));if((u="number"==typeof e)&&0*e==0){if(x.s=1/e<0?(e=-e,-1):1,e===~~e){for(l=0,d=e;d>=10;d/=10,l++);return void(l>h?x.c=x.e=null:(x.e=l,x.c=[e]))}p=String(e)}else{if(!Wr.test(p=String(e)))return s(x,p,u);x.s=45==p.charCodeAt(0)?(p=p.slice(1),-1):1}(l=p.indexOf("."))>-1&&(p=p.replace(".","")),(d=p.search(/e/i))>0?(l<0&&(l=d),l+=+p.slice(d+1),p=p.substring(0,d)):l<0&&(l=p.length)}else{if(F(r,2,j.length,"Base"),10==r&&b)return w(x=new E(e),o+x.e+1,c);if(p=String(e),u="number"==typeof e){if(0*e!=0)return s(x,p,u,r);if(x.s=1/e<0?(p=p.slice(1),-1):1,E.DEBUG&&p.replace(/^0\.0*|\./,"").length>15)throw Error(dr+e)}else x.s=45===p.charCodeAt(0)?(p=p.slice(1),-1):1;for(n=j.slice(0,r),l=d=0,m=p.length;d<m;d++)if(n.indexOf(i=p.charAt(d))<0){if("."==i){if(d>l){l=m;continue}}else if(!a&&(p==p.toUpperCase()&&(p=p.toLowerCase())||p==p.toLowerCase()&&(p=p.toUpperCase()))){a=!0,d=-1,l=0;continue}return s(x,String(e),u,r)}u=!1,(l=(p=t(p,r,10,x.s)).indexOf("."))>-1?p=p.replace(".",""):l=p.length}for(d=0;48===p.charCodeAt(d);d++);for(m=p.length;48===p.charCodeAt(--m););if(p=p.slice(d,++m)){if(m-=d,u&&E.DEBUG&&m>15&&(e>Ge||e!==ae(e)))throw Error(dr+x.s*e);if((l=l-d-1)>h)x.c=x.e=null;else if(l<f)x.c=[x.e=0];else{if(x.e=l,x.c=[],d=(l+1)%S,l<0&&(d+=S),d<m){for(d&&x.c.push(+p.slice(0,d)),m-=S;d<m;)x.c.push(+p.slice(d,d+=S));d=S-(p=p.slice(d)).length}else d-=m;for(;d--;p+="0");x.c.push(+p)}}else x.c=[x.e=0]}function O(e,r,t,s){var n,i,a,l,o;if(null==t?t=c:F(t,0,8),!e.c)return e.toString();if(n=e.c[0],a=e.e,null==r)o=ne(e.c),o=1==s||2==s&&(a<=d||a>=u)?Me(o,a):Oe(o,a,"0");else if(i=(e=w(new E(e),r,t)).e,l=(o=ne(e.c)).length,1==s||2==s&&(r<=i||i<=d)){for(;l<r;o+="0",l++);o=Me(o,i)}else if(r-=a,o=Oe(o,i,"0"),i+1>l){if(--r>0)for(o+=".";r--;o+="0");}else if((r+=i-l)>0)for(i+1==l&&(o+=".");r--;o+="0");return e.s<0&&n?"-"+o:o}function N(e,r){for(var t,s,n=1,i=new E(e[0]);n<e.length;n++)(!(s=new E(e[n])).s||(t=be(i,s))===r||0===t&&i.s===r)&&(i=s);return i}function v(e,r,t){for(var s=1,n=r.length;!r[--n];r.pop());for(n=r[0];n>=10;n/=10,s++);return(t=s+t*S-1)>h?e.c=e.e=null:t<f?e.c=[e.e=0]:(e.e=t,e.c=r),e}function w(e,r,t,s){var n,i,a,l,o,c,d,u=e.c,m=ze;if(u){e:{for(n=1,l=u[0];l>=10;l/=10,n++);if((i=r-n)<0)i+=S,a=r,o=u[c=0],d=ae(o/m[n-a-1]%10);else if((c=qe((i+1)/S))>=u.length){if(!s)break e;for(;u.length<=c;u.push(0));o=d=0,n=1,a=(i%=S)-S+1}else{for(o=l=u[c],n=1;l>=10;l/=10,n++);d=(a=(i%=S)-S+n)<0?0:ae(o/m[n-a-1]%10)}if(s=s||r<0||null!=u[c+1]||(a<0?o:o%m[n-a-1]),s=t<4?(d||s)&&(0==t||t==(e.s<0?3:2)):d>5||5==d&&(4==t||s||6==t&&(i>0?a>0?o/m[n-a]:0:u[c-1])%10&1||t==(e.s<0?8:7)),r<1||!u[0])return u.length=0,s?(r-=e.e+1,u[0]=m[(S-r%S)%S],e.e=-r||0):u[0]=e.e=0,e;if(0==i?(u.length=c,l=1,c--):(u.length=c+1,l=m[S-i],u[c]=a>0?ae(o/m[n-a]%m[a])*l:0),s)for(;;){if(0==c){for(i=1,a=u[0];a>=10;a/=10,i++);for(a=u[0]+=l,l=1;a>=10;a/=10,l++);i!=l&&(e.e++,u[0]==ge&&(u[0]=1));break}if(u[c]+=l,u[c]!=ge)break;u[c--]=0,l=1}for(i=u.length;0===u[--i];u.pop());}e.e>h?e.c=e.e=null:e.e<f&&(e.c=[e.e=0])}return e}function C(e){var r,t=e.e;return null===t?e.toString():(r=ne(e.c),r=t<=d||t>=u?Me(r,t):Oe(r,t,"0"),e.s<0?"-"+r:r)}return E.clone=gr,E.ROUND_UP=0,E.ROUND_DOWN=1,E.ROUND_CEIL=2,E.ROUND_FLOOR=3,E.ROUND_HALF_UP=4,E.ROUND_HALF_DOWN=5,E.ROUND_HALF_EVEN=6,E.ROUND_HALF_CEIL=7,E.ROUND_HALF_FLOOR=8,E.EUCLID=9,E.config=E.set=function(e){var r,t;if(null!=e){if("object"!=typeof e)throw Error(ee+"Object expected: "+e);if(e.hasOwnProperty(r="DECIMAL_PLACES")&&(F(t=e[r],0,H,r),o=t),e.hasOwnProperty(r="ROUNDING_MODE")&&(F(t=e[r],0,8,r),c=t),e.hasOwnProperty(r="EXPONENTIAL_AT")&&((t=e[r])&&t.pop?(F(t[0],-H,0,r),F(t[1],0,H,r),d=t[0],u=t[1]):(F(t,-H,H,r),d=-(u=t<0?-t:t))),e.hasOwnProperty(r="RANGE"))if((t=e[r])&&t.pop)F(t[0],-H,-1,r),F(t[1],1,H,r),f=t[0],h=t[1];else{if(F(t,-H,H,r),!t)throw Error(ee+r+" cannot be zero: "+t);f=-(h=t<0?-t:t)}if(e.hasOwnProperty(r="CRYPTO")){if((t=e[r])!==!!t)throw Error(ee+r+" not true or false: "+t);if(t){if(!(typeof crypto<"u"&&crypto&&(crypto.getRandomValues||crypto.randomBytes)))throw m=!t,Error(ee+"crypto unavailable");m=t}else m=t}if(e.hasOwnProperty(r="MODULO_MODE")&&(F(t=e[r],0,9,r),p=t),e.hasOwnProperty(r="POW_PRECISION")&&(F(t=e[r],0,H,r),x=t),e.hasOwnProperty(r="FORMAT")){if("object"!=typeof(t=e[r]))throw Error(ee+r+" not an object: "+t);g=t}if(e.hasOwnProperty(r="ALPHABET")){if("string"!=typeof(t=e[r])||/^.?$|[+\-.\s]|(.).*\1/.test(t))throw Error(ee+r+" invalid: "+t);b="0123456789"==t.slice(0,10),j=t}}return{DECIMAL_PLACES:o,ROUNDING_MODE:c,EXPONENTIAL_AT:[d,u],RANGE:[f,h],CRYPTO:m,MODULO_MODE:p,POW_PRECISION:x,FORMAT:g,ALPHABET:j}},E.isBigNumber=function(e){if(!e||!0!==e._isBigNumber)return!1;if(!E.DEBUG)return!0;var r,t,s=e.c,n=e.e,i=e.s;e:if("[object Array]"=={}.toString.call(s)){if((1===i||-1===i)&&n>=-H&&n<=H&&n===ae(n)){if(0===s[0]){if(0===n&&1===s.length)return!0;break e}if((r=(n+1)%S)<1&&(r+=S),String(s[0]).length==r){for(r=0;r<s.length;r++)if((t=s[r])<0||t>=ge||t!==ae(t))break e;if(0!==t)return!0}}}else if(null===s&&null===n&&(null===i||1===i||-1===i))return!0;throw Error(ee+"Invalid BigNumber: "+e)},E.maximum=E.max=function(){return N(arguments,-1)},E.minimum=E.min=function(){return N(arguments,1)},E.random=(n=9007199254740992,i=Math.random()*n&2097151?function(){return ae(Math.random()*n)}:function(){return 8388608*(1073741824*Math.random()|0)+(8388608*Math.random()|0)},function(e){var r,t,s,n,a,c=0,d=[],u=new E(l);if(null==e?e=o:F(e,0,H),n=qe(e/S),m)if(crypto.getRandomValues){for(r=crypto.getRandomValues(new Uint32Array(n*=2));c<n;)(a=131072*r[c]+(r[c+1]>>>11))>=9e15?(t=crypto.getRandomValues(new Uint32Array(2)),r[c]=t[0],r[c+1]=t[1]):(d.push(a%1e14),c+=2);c=n/2}else{if(!crypto.randomBytes)throw m=!1,Error(ee+"crypto unavailable");for(r=crypto.randomBytes(n*=7);c<n;)(a=281474976710656*(31&r[c])+1099511627776*r[c+1]+4294967296*r[c+2]+16777216*r[c+3]+(r[c+4]<<16)+(r[c+5]<<8)+r[c+6])>=9e15?crypto.randomBytes(7).copy(r,c):(d.push(a%1e14),c+=7);c=n/7}if(!m)for(;c<n;)(a=i())<9e15&&(d[c++]=a%1e14);for(n=d[--c],e%=S,n&&e&&(a=ze[S-e],d[c]=ae(n/a)*a);0===d[c];d.pop(),c--);if(c<0)d=[s=0];else{for(s=-1;0===d[0];d.splice(0,1),s-=S);for(c=1,a=d[0];a>=10;a/=10,c++);c<S&&(s-=S-c)}return u.e=s,u.c=d,u}),E.sum=function(){for(var e=1,r=arguments,t=new E(r[0]);e<r.length;)t=t.plus(r[e++]);return t},t=function(){var e="0123456789";function t(e,r,t,s){for(var n,i,a=[0],l=0,o=e.length;l<o;){for(i=a.length;i--;a[i]*=r);for(a[0]+=s.indexOf(e.charAt(l++)),n=0;n<a.length;n++)a[n]>t-1&&(null==a[n+1]&&(a[n+1]=0),a[n+1]+=a[n]/t|0,a[n]%=t)}return a.reverse()}return function(s,n,i,a,l){var d,u,f,h,m,p,g,b,O=s.indexOf("."),N=o,v=c;for(O>=0&&(h=x,x=0,s=s.replace(".",""),p=(b=new E(n)).pow(s.length-O),x=h,b.c=t(Oe(ne(p.c),p.e,"0"),10,i,e),b.e=b.c.length),f=h=(g=t(s,n,i,l?(d=j,e):(d=e,j))).length;0==g[--h];g.pop());if(!g[0])return d.charAt(0);if(O<0?--f:(p.c=g,p.e=f,p.s=a,g=(p=r(p,b,N,v,i)).c,m=p.r,f=p.e),O=g[u=f+N+1],h=i/2,m=m||u<0||null!=g[u+1],m=v<4?(null!=O||m)&&(0==v||v==(p.s<0?3:2)):O>h||O==h&&(4==v||m||6==v&&1&g[u-1]||v==(p.s<0?8:7)),u<1||!g[0])s=m?Oe(d.charAt(1),-N,d.charAt(0)):d.charAt(0);else{if(g.length=u,m)for(--i;++g[--u]>i;)g[u]=0,u||(++f,g=[1].concat(g));for(h=g.length;!g[--h];);for(O=0,s="";O<=h;s+=d.charAt(g[O++]));s=Oe(s,f,d.charAt(0))}return s}}(),r=function(){function e(e,r,t){var s,n,i,a,l=0,o=e.length,c=r%Ee,d=r/Ee|0;for(e=e.slice();o--;)l=((n=c*(i=e[o]%Ee)+(s=d*i+(a=e[o]/Ee|0)*c)%Ee*Ee+l)/t|0)+(s/Ee|0)+d*a,e[o]=n%t;return l&&(e=[l].concat(e)),e}function r(e,r,t,s){var n,i;if(t!=s)i=t>s?1:-1;else for(n=i=0;n<t;n++)if(e[n]!=r[n]){i=e[n]>r[n]?1:-1;break}return i}function t(e,r,t,s){for(var n=0;t--;)e[t]-=n,n=e[t]<r[t]?1:0,e[t]=n*s+e[t]-r[t];for(;!e[0]&&e.length>1;e.splice(0,1));}return function(s,n,i,a,l){var o,c,d,u,f,h,m,p,x,g,j,b,O,N,v,C,y,A=s.s==n.s?1:-1,D=s.c,_=n.c;if(!(D&&D[0]&&_&&_[0]))return new E(s.s&&n.s&&(D?!_||D[0]!=_[0]:_)?D&&0==D[0]||!_?0*A:A/0:NaN);for(x=(p=new E(A)).c=[],A=i+(c=s.e-n.e)+1,l||(l=ge,c=oe(s.e/S)-oe(n.e/S),A=A/S|0),d=0;_[d]==(D[d]||0);d++);if(_[d]>(D[d]||0)&&c--,A<0)x.push(1),u=!0;else{for(N=D.length,C=_.length,d=0,A+=2,(f=ae(l/(_[0]+1)))>1&&(_=e(_,f,l),D=e(D,f,l),C=_.length,N=D.length),O=C,j=(g=D.slice(0,C)).length;j<C;g[j++]=0);y=_.slice(),y=[0].concat(y),v=_[0],_[1]>=l/2&&v++;do{if(f=0,(o=r(_,g,C,j))<0){if(b=g[0],C!=j&&(b=b*l+(g[1]||0)),(f=ae(b/v))>1)for(f>=l&&(f=l-1),m=(h=e(_,f,l)).length,j=g.length;1==r(h,g,m,j);)f--,t(h,C<m?y:_,m,l),m=h.length,o=1;else 0==f&&(o=f=1),m=(h=_.slice()).length;if(m<j&&(h=[0].concat(h)),t(g,h,j,l),j=g.length,-1==o)for(;r(_,g,C,j)<1;)f++,t(g,C<j?y:_,j,l),j=g.length}else 0===o&&(f++,g=[0]);x[d++]=f,g[0]?g[j++]=D[O]||0:(g=[D[O]],j=1)}while((O++<N||null!=g[0])&&A--);u=null!=g[0],x[0]||x.splice(0,1)}if(l==ge){for(d=1,A=x[0];A>=10;A/=10,d++);w(p,i+(p.e=d+c*S-1)+1,a,u)}else p.e=c,p.r=+u;return p}}(),s=function(){var e=/^(-?)0([xbo])(?=\w[\w.]*$)/i,r=/^([^.]+)\.$/,t=/^\.([^.]+)$/,s=/^-?(Infinity|NaN)$/,n=/^\s*\+(?=[\w.])|^\s+|\s+$/g;return function(i,a,l,o){var c,d=l?a:a.replace(n,"");if(s.test(d))i.s=isNaN(d)?null:d<0?-1:1;else{if(!l&&(d=d.replace(e,(function(e,r,t){return c="x"==(t=t.toLowerCase())?16:"b"==t?2:8,o&&o!=c?e:r})),o&&(c=o,d=d.replace(r,"$1").replace(t,"0.$1")),a!=d))return new E(d,c);if(E.DEBUG)throw Error(ee+"Not a"+(o?" base "+o:"")+" number: "+a);i.s=null}i.c=i.e=null}}(),a.absoluteValue=a.abs=function(){var e=new E(this);return e.s<0&&(e.s=1),e},a.comparedTo=function(e,r){return be(this,new E(e,r))},a.decimalPlaces=a.dp=function(e,r){var t,s,n,i=this;if(null!=e)return F(e,0,H),null==r?r=c:F(r,0,8),w(new E(i),e+i.e+1,r);if(!(t=i.c))return null;if(s=((n=t.length-1)-oe(this.e/S))*S,n=t[n])for(;n%10==0;n/=10,s--);return s<0&&(s=0),s},a.dividedBy=a.div=function(e,t){return r(this,new E(e,t),o,c)},a.dividedToIntegerBy=a.idiv=function(e,t){return r(this,new E(e,t),0,1)},a.exponentiatedBy=a.pow=function(e,r){var t,s,n,i,a,o,d,u,f=this;if((e=new E(e)).c&&!e.isInteger())throw Error(ee+"Exponent not an integer: "+C(e));if(null!=r&&(r=new E(r)),a=e.e>14,!f.c||!f.c[0]||1==f.c[0]&&!f.e&&1==f.c.length||!e.c||!e.c[0])return u=new E(Math.pow(+C(f),a?e.s*(2-Fe(e)):+C(e))),r?u.mod(r):u;if(o=e.s<0,r){if(r.c?!r.c[0]:!r.s)return new E(NaN);(s=!o&&f.isInteger()&&r.isInteger())&&(f=f.mod(r))}else{if(e.e>9&&(f.e>0||f.e<-1||(0==f.e?f.c[0]>1||a&&f.c[1]>=24e7:f.c[0]<8e13||a&&f.c[0]<=9999975e7)))return i=f.s<0&&Fe(e)?-0:0,f.e>-1&&(i=1/i),new E(o?1/i:i);x&&(i=qe(x/S+2))}for(a?(t=new E(.5),o&&(e.s=1),d=Fe(e)):d=(n=Math.abs(+C(e)))%2,u=new E(l);;){if(d){if(!(u=u.times(f)).c)break;i?u.c.length>i&&(u.c.length=i):s&&(u=u.mod(r))}if(n){if(0===(n=ae(n/2)))break;d=n%2}else if(w(e=e.times(t),e.e+1,1),e.e>14)d=Fe(e);else{if(0===(n=+C(e)))break;d=n%2}f=f.times(f),i?f.c&&f.c.length>i&&(f.c.length=i):s&&(f=f.mod(r))}return s?u:(o&&(u=l.div(u)),r?u.mod(r):i?w(u,x,c,undefined):u)},a.integerValue=function(e){var r=new E(this);return null==e?e=c:F(e,0,8),w(r,r.e+1,e)},a.isEqualTo=a.eq=function(e,r){return 0===be(this,new E(e,r))},a.isFinite=function(){return!!this.c},a.isGreaterThan=a.gt=function(e,r){return be(this,new E(e,r))>0},a.isGreaterThanOrEqualTo=a.gte=function(e,r){return 1===(r=be(this,new E(e,r)))||0===r},a.isInteger=function(){return!!this.c&&oe(this.e/S)>this.c.length-2},a.isLessThan=a.lt=function(e,r){return be(this,new E(e,r))<0},a.isLessThanOrEqualTo=a.lte=function(e,r){return-1===(r=be(this,new E(e,r)))||0===r},a.isNaN=function(){return!this.s},a.isNegative=function(){return this.s<0},a.isPositive=function(){return this.s>0},a.isZero=function(){return!!this.c&&0==this.c[0]},a.minus=function(e,r){var t,s,n,i,a=this,l=a.s;if(r=(e=new E(e,r)).s,!l||!r)return new E(NaN);if(l!=r)return e.s=-r,a.plus(e);var o=a.e/S,d=e.e/S,u=a.c,f=e.c;if(!o||!d){if(!u||!f)return u?(e.s=-r,e):new E(f?a:NaN);if(!u[0]||!f[0])return f[0]?(e.s=-r,e):new E(u[0]?a:3==c?-0:0)}if(o=oe(o),d=oe(d),u=u.slice(),l=o-d){for((i=l<0)?(l=-l,n=u):(d=o,n=f),n.reverse(),r=l;r--;n.push(0));n.reverse()}else for(s=(i=(l=u.length)<(r=f.length))?l:r,l=r=0;r<s;r++)if(u[r]!=f[r]){i=u[r]<f[r];break}if(i&&(n=u,u=f,f=n,e.s=-e.s),(r=(s=f.length)-(t=u.length))>0)for(;r--;u[t++]=0);for(r=ge-1;s>l;){if(u[--s]<f[s]){for(t=s;t&&!u[--t];u[t]=r);--u[t],u[s]+=ge}u[s]-=f[s]}for(;0==u[0];u.splice(0,1),--d);return u[0]?v(e,u,d):(e.s=3==c?-1:1,e.c=[e.e=0],e)},a.modulo=a.mod=function(e,t){var s,n,i=this;return e=new E(e,t),!i.c||!e.s||e.c&&!e.c[0]?new E(NaN):!e.c||i.c&&!i.c[0]?new E(i):(9==p?(n=e.s,e.s=1,s=r(i,e,0,3),e.s=n,s.s*=n):s=r(i,e,0,p),!(e=i.minus(s.times(e))).c[0]&&1==p&&(e.s=i.s),e)},a.multipliedBy=a.times=function(e,r){var t,s,n,i,a,l,o,c,d,u,f,h,m,p,x,g=this,j=g.c,b=(e=new E(e,r)).c;if(!(j&&b&&j[0]&&b[0]))return!g.s||!e.s||j&&!j[0]&&!b||b&&!b[0]&&!j?e.c=e.e=e.s=null:(e.s*=g.s,j&&b?(e.c=[0],e.e=0):e.c=e.e=null),e;for(s=oe(g.e/S)+oe(e.e/S),e.s*=g.s,(o=j.length)<(u=b.length)&&(m=j,j=b,b=m,n=o,o=u,u=n),n=o+u,m=[];n--;m.push(0));for(p=ge,x=Ee,n=u;--n>=0;){for(t=0,f=b[n]%x,h=b[n]/x|0,i=n+(a=o);i>n;)t=((c=f*(c=j[--a]%x)+(l=h*c+(d=j[a]/x|0)*f)%x*x+m[i]+t)/p|0)+(l/x|0)+h*d,m[i--]=c%p;m[i]=t}return t?++s:m.splice(0,1),v(e,m,s)},a.negated=function(){var e=new E(this);return e.s=-e.s||null,e},a.plus=function(e,r){var t,s=this,n=s.s;if(r=(e=new E(e,r)).s,!n||!r)return new E(NaN);if(n!=r)return e.s=-r,s.minus(e);var i=s.e/S,a=e.e/S,l=s.c,o=e.c;if(!i||!a){if(!l||!o)return new E(n/0);if(!l[0]||!o[0])return o[0]?e:new E(l[0]?s:0*n)}if(i=oe(i),a=oe(a),l=l.slice(),n=i-a){for(n>0?(a=i,t=o):(n=-n,t=l),t.reverse();n--;t.push(0));t.reverse()}for((n=l.length)-(r=o.length)<0&&(t=o,o=l,l=t,r=n),n=0;r;)n=(l[--r]=l[r]+o[r]+n)/ge|0,l[r]=ge===l[r]?0:l[r]%ge;return n&&(l=[n].concat(l),++a),v(e,l,a)},a.precision=a.sd=function(e,r){var t,s,n,i=this;if(null!=e&&e!==!!e)return F(e,1,H),null==r?r=c:F(r,0,8),w(new E(i),e,r);if(!(t=i.c))return null;if(s=(n=t.length-1)*S+1,n=t[n]){for(;n%10==0;n/=10,s--);for(n=t[0];n>=10;n/=10,s++);}return e&&i.e+1>s&&(s=i.e+1),s},a.shiftedBy=function(e){return F(e,-Ge,Ge),this.times("1e"+e)},a.squareRoot=a.sqrt=function(){var e,t,s,n,i,a=this,l=a.c,d=a.s,u=a.e,f=o+4,h=new E("0.5");if(1!==d||!l||!l[0])return new E(!d||d<0&&(!l||l[0])?NaN:l?a:1/0);if(0==(d=Math.sqrt(+C(a)))||d==1/0?(((t=ne(l)).length+u)%2==0&&(t+="0"),d=Math.sqrt(+t),u=oe((u+1)/2)-(u<0||u%2),d==1/0?t="5e"+u:t=(t=d.toExponential()).slice(0,t.indexOf("e")+1)+u,s=new E(t)):s=new E(d+""),s.c[0])for((d=(u=s.e)+f)<3&&(d=0);;)if(i=s,s=h.times(i.plus(r(a,i,f,1))),ne(i.c).slice(0,d)===(t=ne(s.c)).slice(0,d)){if(s.e<u&&--d,"9999"!=(t=t.slice(d-3,d+1))&&(n||"4999"!=t)){(!+t||!+t.slice(1)&&"5"==t.charAt(0))&&(w(s,s.e+o+2,1),e=!s.times(s).eq(a));break}if(!n&&(w(i,i.e+o+2,0),i.times(i).eq(a))){s=i;break}f+=4,d+=4,n=1}return w(s,s.e+o+1,c,e)},a.toExponential=function(e,r){return null!=e&&(F(e,0,H),e++),O(this,e,r,1)},a.toFixed=function(e,r){return null!=e&&(F(e,0,H),e=e+this.e+1),O(this,e,r)},a.toFormat=function(e,r,t){var s,n=this;if(null==t)null!=e&&r&&"object"==typeof r?(t=r,r=null):e&&"object"==typeof e?(t=e,e=r=null):t=g;else if("object"!=typeof t)throw Error(ee+"Argument not an object: "+t);if(s=n.toFixed(e,r),n.c){var i,a=s.split("."),l=+t.groupSize,o=+t.secondaryGroupSize,c=t.groupSeparator||"",d=a[0],u=a[1],f=n.s<0,h=f?d.slice(1):d,m=h.length;if(o&&(i=l,l=o,o=i,m-=i),l>0&&m>0){for(i=m%l||l,d=h.substr(0,i);i<m;i+=l)d+=c+h.substr(i,l);o>0&&(d+=c+h.slice(i)),f&&(d="-"+d)}s=u?d+(t.decimalSeparator||"")+((o=+t.fractionGroupSize)?u.replace(new RegExp("\\d{"+o+"}\\B","g"),"$&"+(t.fractionGroupSeparator||"")):u):d}return(t.prefix||"")+s+(t.suffix||"")},a.toFraction=function(e){var t,s,n,i,a,o,d,u,f,m,p,x,g=this,j=g.c;if(null!=e&&(!(d=new E(e)).isInteger()&&(d.c||1!==d.s)||d.lt(l)))throw Error(ee+"Argument "+(d.isInteger()?"out of range: ":"not an integer: ")+C(d));if(!j)return new E(g);for(t=new E(l),f=s=new E(l),n=u=new E(l),x=ne(j),a=t.e=x.length-g.e-1,t.c[0]=ze[(o=a%S)<0?S+o:o],e=!e||d.comparedTo(t)>0?a>0?t:f:d,o=h,h=1/0,d=new E(x),u.c[0]=0;m=r(d,t,0,1),1!=(i=s.plus(m.times(n))).comparedTo(e);)s=n,n=i,f=u.plus(m.times(i=f)),u=i,t=d.minus(m.times(i=t)),d=i;return i=r(e.minus(s),n,0,1),u=u.plus(i.times(f)),s=s.plus(i.times(n)),u.s=f.s=g.s,p=r(f,n,a*=2,c).minus(g).abs().comparedTo(r(u,s,a,c).minus(g).abs())<1?[f,n]:[u,s],h=o,p},a.toNumber=function(){return+C(this)},a.toPrecision=function(e,r){return null!=e&&F(e,1,H),O(this,e,r,2)},a.toString=function(e){var r,s=this,n=s.s,i=s.e;return null===i?n?(r="Infinity",n<0&&(r="-"+r)):r="NaN":(null==e?r=i<=d||i>=u?Me(ne(s.c),i):Oe(ne(s.c),i,"0"):10===e&&b?r=Oe(ne((s=w(new E(s),o+i+1,c)).c),s.e,"0"):(F(e,2,j.length,"Base"),r=t(Oe(ne(s.c),i,"0"),10,e,n,!0)),n<0&&s.c[0]&&(r="-"+r)),r},a.valueOf=a.toJSON=function(){return C(this)},a._isBigNumber=!0,a[Symbol.toStringTag]="BigNumber",a[Symbol.for("nodejs.util.inspect.custom")]=a.valueOf,null!=e&&E.set(e),E}function oe(e){var r=0|e;return e>0||e===r?r:r-1}function ne(e){for(var r,t,s=1,n=e.length,i=e[0]+"";s<n;){for(r=e[s++]+"",t=S-r.length;t--;r="0"+r);i+=r}for(n=i.length;48===i.charCodeAt(--n););return i.slice(0,n+1||1)}function be(e,r){var t,s,n=e.c,i=r.c,a=e.s,l=r.s,o=e.e,c=r.e;if(!a||!l)return null;if(t=n&&!n[0],s=i&&!i[0],t||s)return t?s?0:-l:a;if(a!=l)return a;if(t=a<0,s=o==c,!n||!i)return s?0:!n^t?1:-1;if(!s)return o>c^t?1:-1;for(l=(o=n.length)<(c=i.length)?o:c,a=0;a<l;a++)if(n[a]!=i[a])return n[a]>i[a]^t?1:-1;return o==c?0:o>c^t?1:-1}function F(e,r,t,s){if(e<r||e>t||e!==ae(e))throw Error(ee+(s||"Argument")+("number"==typeof e?e<r||e>t?" out of range: ":" not an integer: ":" not a primitive number: ")+String(e))}function Fe(e){var r=e.c.length-1;return oe(e.e/S)==r&&e.c[r]%2!=0}function Me(e,r){return(e.length>1?e.charAt(0)+"."+e.slice(1):e)+(r<0?"e":"e+")+r}function Oe(e,r,t){var s,n;if(r<0){for(n=t+".";++r;n+=t);e=n+e}else if(++r>(s=e.length)){for(n=t,r-=s;--r;n+=t);e+=n}else r<s&&(e=e.slice(0,r)+"."+e.slice(r));return e}var Zr=gr();function Yr(e,r=8){let t=e.toString(),s=t.split(".");return 1===s.length||2===s.length&&s[1].length<=r?parseFloat(t):parseFloat(s[0]+"."+s[1].substr(0,r))}function ur(e,r){return Math.round($e(e,r))}function hr(e,r,t,s,n){if(e&&"number"==typeof e){let i=ur(r,t),a=ur(s,n),l=i/a,o=a/i;i>=a?o=1:l=1,e>1e5&&(e=Yr(e,5));let c=new Zr(e.toString()).toFraction();return{base:c[0]*l,quote:c[1]*o}}if(0===e)return{base:0,quote:0}}const[Qr]=Br({fetcher:async(e,r)=>{const t=await fetch(`http://localhost:8080/api/getObjects/${e}`,{method:"POST",body:JSON.stringify([r])});if(!t.ok)return void console.log("Failed to fetch object data");const s=await t.json();if(s&&s.result&&s.result.length){const e=Er(Sr(s.result,!0));return JSON.parse(br(e))[0]}}});function Kr(e){const{chosenAssets:r,lendingAsset:s,marketSearch:n,storeCallback:i}=e,{t:a,i18n:l}=mr(pr.get(),{i18n:xr}),o=E.useMemo((()=>new Gr(n.filter((e=>!r.find((r=>r.symbol===e.s))&&e.s!==s)),{includeScore:!0,keys:["id","s","u"]})),[r,s]),[c,d]=E.useState(),[u,f]=E.useState(),[h,m]=E.useState(!1);E.useEffect((()=>{if(c){const e=o.search(c);f(e)}}),[c,o]);return t.jsxs(Je,{open:h,onOpenChange:e=>{e||f(),m(e)},children:[s&&n?t.jsx(Ve,{asChild:!0,children:t.jsx("span",{onClick:()=>{event.preventDefault()},className:"inline-block border border-grey rounded pl-4 pb-1 pr-4 text-lg",children:t.jsx(Ae,{children:"➕ Add collateral"})})}):t.jsx(Ae,{children:"⛔ No lending asset"}),t.jsx(He,{className:"sm:max-w-[425px] bg-white",children:t.jsxs(t.Fragment,{children:[t.jsx("h3",{className:"text-2xl font-extrabold tracking-tight",children:"Which collateral asset?"}),t.jsx("h4",{className:"text-md font-bold tracking-tight",children:"Please search for a new collateral asset below"}),t.jsx(te,{name:"assetSearch",placeholder:a("AssetDropDownCard:search"),onChange:e=>{d(e.target.value)}}),u&&u.length?t.jsx(t.Fragment,{children:t.jsx(Xe,{height:200,itemCount:u.length,itemSize:70,className:"w-full",children:({index:e,style:s})=>{const n=u[e];let l=0;return t.jsx("div",{style:{...s,marginBottom:"10px",paddingRight:"10px"},children:t.jsxs(Pe,{children:[t.jsx(Be,{asChild:!0,children:t.jsx(De,{style:{marginBottom:"2px"},children:t.jsxs(ye,{className:"p-3",children:[t.jsxs(ke,{className:"h-3",children:[n.item.s," (",n.item.id,")"]}),t.jsx(Te,{children:a("AssetDropDownCard:issued",{user:n.item.u})})]})},`acard-${n.item.id}`)}),t.jsxs(Ie,{children:[t.jsxs(Ae,{children:["Provide price for ",n.item.s]}),t.jsx(te,{name:"price",className:"mt-5",placeholder:l,onChange:e=>{/^[a-zA-Z0-9.-]*$/.test(e.target.value)&&(l=e.target.value)}}),t.jsx(le,{onClick:()=>{setTimeout((()=>{i(r.concat([{symbol:n.item.s,price:l,precision:n.item.p,id:n.item.id}]))}),0),m(!1)},className:"mt-5",children:"Add asset"})]})]})})}})}):null]})})]})}const Le={"1hr":3600,"12hr":43200,"24hr":86400,"3d":259200,"7d":604800,"30d":2592e3,"90d":7776e3,"365d":31536e3,"730d":63072e3,"1825d":15768e4};function kt(e){const{t:r,i18n:s}=mr(pr.get(),{i18n:xr}),n=vr({defaultValues:{account:""}}),[i,a]=E.useState(!1),[l,o]=E.useState(),[c,d]=E.useState(0),[u,f]=E.useState(0),[h,m]=E.useState("1hr"),[p,x]=E.useState(0),[g,j]=E.useState(),[b,O]=E.useState([]),[N,v]=E.useState([]),[w,S]=E.useState(!1),C=E.useCallback(yr(((e,r)=>{/^[0-9]*\.?[0-9]*$/.test(e)&&e>=0&&e<=100&&f(e)}),25),[]),y=E.useSyncExternalStore(lr.subscribe,lr.get,(()=>!0));Ir(y&&y.chain?y.chain:"bitshares",["assets","offers","marketSearch","globalParams"]);const A=E.useSyncExternalStore(er.subscribe,er.get,(()=>!0)),D=E.useSyncExternalStore(rr.subscribe,rr.get,(()=>!0)),_=E.useSyncExternalStore(tr.subscribe,tr.get,(()=>!0)),k=E.useSyncExternalStore(sr.subscribe,sr.get,(()=>!0)),F=E.useSyncExternalStore(ir.subscribe,ir.get,(()=>!0)),P=E.useSyncExternalStore(nr.subscribe,nr.get,(()=>!0)),I=E.useMemo((()=>y&&y.chain?y.chain:"bitshares"),[y]),B=E.useMemo((()=>I&&(A||D)?"bitshares"===I?A:D:[]),[A,D,I]),T=E.useMemo((()=>I&&(F||P)?"bitshares"===I?F:P:[]),[F,P,I]),L=E.useMemo((()=>I&&(_||k)?"bitshares"===I?_:k:[]),[_,k,I]),[M,U]=E.useState(0);E.useEffect((()=>{if(L&&L.length){const e=L.find((e=>0===e[0])),r=ve(e[1].fee,5);U(r)}}),[L]);const[$,R]=E.useState(0),[H,q]=E.useState();E.useEffect((()=>{let e;return y&&y.id&&(e=Tr([y.chain,y.id]).subscribe((({data:e,error:r,loading:t})=>{e&&!r&&!t&&q(e)}))),()=>{e&&e()}}),[y,$]);const[G,z]=E.useState(),V=E.useMemo((()=>l?B.filter((e=>e.symbol===l)):[]),[l,B]);E.useEffect((()=>{V&&V.length&&z(V[0])}),[V]);const[J,X]=E.useState();E.useEffect((()=>{!async function(){if(window.location.search){const e=new URLSearchParams(window.location.search),r=Object.fromEntries(e.entries()),t=r&&r.id?r.id:null;if(!t||!t.length)return void console.log("Invalid credit offer url parameter 1");if(t&&t.length&&!t.includes("1.21."))return void console.log("Invalid credit offer url parameter 2");X(t)}}()}),[]);const[W,Q]=E.useState(),[Y,K]=E.useState([]),[Z,ee]=E.useState();E.useEffect((()=>{let e;return J&&y&&y.chain&&(e=Qr([y.chain,J]).subscribe((({data:e})=>{if(e&&!e.error&&!e.loading){const r=B.find((r=>r.id===e.asset_type));ee(e),Q(e.owner_account),o(r.symbol),d(ve(e.total_balance,r.precision)),f(e.fee_rate?e.fee_rate/1e4:0),m(Object.keys(Le).reduce(((r,t)=>Math.abs(Le[r]-e.max_duration_seconds)<Math.abs(Le[t]-e.max_duration_seconds)?r:t))),x(ve(e.min_deal_amount,r.precision)),j(e.auto_disable_time),v(e.acceptable_collateral.map((e=>{const t=B.find((r=>r.id===e[1].quote.asset_id)),s=1/(ve(e[1].base.amount,r.precision)/ve(e[1].quote.amount,t.precision)),n=hr(1/s,1,r.precision,1,t.precision);return{id:e[0],symbol:t.symbol,price:s,baseAmount:n.base,quoteAmount:n.quote}}))),e.acceptable_borrowers&&K(chunkArray(e.acceptable_borrowers,100))}}))),()=>{e&&e()}}),[J,y,B]);const[re,se]=E.useState(0);E.useEffect((()=>{let e;if(Y&&y&&y.chain&&re<Y.length){const r=Y[re],t=r.flatMap(Object.keys);console.log({_batchIDs:t}),e=Pr([y.chain,t]).subscribe((({data:e})=>{e&&!e.error&&!e.loading&&(console.log({usernames:e,index:re}),O(b.concat(e.map(((e,t)=>({name:e.name,id:e.id,amount:ve(r[t].amount,G.precision)}))))),se((e=>e+1)))}))}return()=>{e&&e()}}),[Y,re]);const[ne,ie]=E.useState();E.useEffect((()=>{if(!G||!y||!y.id)return;const e={owner_account:y.id,fee_rate:parseInt(100*u),max_duration_seconds:Le[h],min_deal_amount:$e(p,G.precision),enabled:!0,auto_disable_time:g,acceptable_collateral:N.map((e=>{let r;return e&&(!e.baseAmount||!e.quoteAmount)&&(r=hr(1/e.price,1,G.precision,1,e.precision)),[e.id,{base:{asset_id:G.id,amount:r?r.base:e.baseAmount},quote:{asset_id:e.id,amount:r?r.quote:e.quoteAmount}}]})),acceptable_borrowers:b.map((e=>[e.id,$e(e.amount,G.precision)])),extensions:[]},r=$e(c,G.precision);if(!J)return e.asset_type=G.id,e.balance=r,void ie([e]);e.offer_id=J,r!==Z.total_balance&&(e.delta_amount={amount:r>Z.total_balance?r-Z.total_balance:Z.total_balance-r,asset_id:G.id}),ie([e])}),[y,u,h,p,G,g,N,b,c,J,Z]);const ae=({index:e,style:s})=>{let n=N[e];if(!n)return null;const i=B.find((e=>e.id===n.id));if(!i)return null;let a;return t.jsx("div",{style:{...s},children:t.jsx(De,{className:"ml-2 mr-2 mt-1",children:t.jsx(ye,{className:"pb-3 pt-3",children:t.jsxs("span",{className:"grid grid-cols-12",children:[t.jsxs("span",{className:"col-span-9",children:[t.jsxs(ke,{children:["#",e+1,": ",i.symbol," (",i.id,")"]}),t.jsxs(Te,{children:[r("CreditOfferEditor:price")," ",n.price," ",i.symbol,"/",l??""]})]}),t.jsxs("span",{className:"col-span-3 text-center",children:[t.jsxs(Pe,{children:[t.jsx(Be,{asChild:!0,children:t.jsx(le,{variant:"outline",children:"⚙️"})}),t.jsxs(Ie,{children:[t.jsx(Ae,{children:r("CreditOfferEditor:editingPrice")})," ",t.jsx(te,{name:"price",className:"mt-4",placeholder:n.price,onChange:e=>{/^[a-zA-Z0-9.-]*$/.test(e.target.value)&&(a=N.map((r=>(r.symbol===n.symbol&&(r.price=parseFloat(e.target.value)),r))))}}),t.jsx(le,{variant:"outline",className:"mt-4",onClick:()=>{a&&a.price!==n.price?v(a):console.log("No change in price")},children:r("CreditOfferEditor:setNewPrice")})]})]}),t.jsx(le,{variant:"outline",className:"ml-2",onClick:e=>{e.preventDefault();const r=N.filter((e=>e.symbol!==n.symbol));v(r)},children:"❌"})]})]})})})},`acard-${n.id}`)},oe=({index:e,style:s})=>{let n,i=b[e];return i?t.jsx("div",{style:{...s},children:t.jsx(De,{className:"ml-2 mr-2 mt-1",children:t.jsx(ye,{className:"pb-3 pt-3",children:t.jsxs("span",{className:"grid grid-cols-12",children:[t.jsx("span",{className:"col-span-1",children:t.jsx($r,{size:40,name:i.name,extra:"Borrower",expression:{eye:"normal",mouth:"open"},colors:["#92A1C6","#146A7C","#F0AB3D","#C271B4","#C20D90"]})}),t.jsxs("span",{className:"col-span-8 ml-3",children:[t.jsxs(ke,{children:["#",e+1,": ",i.name," (",i.id,")"]}),t.jsxs(Te,{children:[r("CreditOfferEditor:borrowLimit"),": ",i.amount," ",G?G.symbol:""]})]}),t.jsxs("span",{className:"col-span-3 text-center",children:[t.jsxs(Pe,{children:[t.jsx(Be,{asChild:!0,children:t.jsx(le,{variant:"outline",children:"⚙️"})}),t.jsxs(Ie,{children:[t.jsx(Ae,{children:r("CreditOfferEditor:editingMaxAmount")}),t.jsx(te,{name:"price",className:"mt-4",placeholder:i.price,onChange:e=>{/^[a-zA-Z0-9.-]*$/.test(e.target.value)&&(n=b.map((r=>(r.id===i.id&&(r.amount=e.target.value),r))))}}),t.jsx(le,{variant:"outline",className:"mt-4",onClick:()=>{n&&O(n)},children:r("CreditOfferEditor:setNewMaximum")})]})]}),t.jsx(le,{variant:"outline",className:"ml-2",onClick:e=>{e.preventDefault();const r=b.filter((e=>e.id!==i.id));O(r)},children:"❌"})]})]})})})},`acard-${i.id}`):null};return t.jsxs("div",{className:"container mx-auto mt-5 mb-5",children:[t.jsxs("div",{className:"grid grid-cols-1 gap-3",children:[t.jsxs(De,{children:[t.jsxs(ye,{children:[t.jsx(ke,{children:r(W?"CreditOfferEditor:editingExistingOffer":"CreditOfferEditor:creatingNewOffer")}),t.jsx(Te,{children:r(W?"CreditOfferEditor:editingExistingOfferDescription":"CreditOfferEditor:creatingNewOfferDescription")})]}),t.jsx(ar,{children:t.jsx(_r,{...n,children:t.jsxs("form",{onSubmit:()=>{a(!0),event.preventDefault()},children:[J?t.jsxs("span",{className:"grid grid-cols-12",children:[t.jsx("span",{className:"col-span-6",children:t.jsx(ue,{control:n.control,name:"offerOwner",render:({field:e})=>t.jsxs(he,{children:[t.jsx(me,{children:r("CreditOfferEditor:offerOwner")}),t.jsx(pe,{children:t.jsxs("div",{className:"grid grid-cols-12 mt-4 mr-2",children:[t.jsx("div",{className:"col-span-8 mr-2 mb-1 mt-1",children:t.jsx(te,{disabled:!0,placeholder:W??"1.2.x"})}),t.jsx("div",{className:"col-span-4 mt-1 text-center",children:t.jsx(or,{variant:"outline",classnamecontents:"",type:"button",text:r("CreditOfferEditor:viewAccount"),hyperlink:"bitshares"===y.chain?`https://blocksights.info/#/accounts/${W??""}`:`https://blocksights.info/#/accounts/${W??""}?network=testnet`})})]})}),t.jsx(xe,{children:r("CreditOfferEditor:offerOwnerDescription")})]})})}),t.jsx("span",{className:"col-span-6",children:t.jsx(ue,{control:n.control,name:"offerID",render:({field:e})=>t.jsxs(he,{children:[t.jsx(me,{children:"Existing Offer ID"}),t.jsx(pe,{children:t.jsxs("div",{className:"grid grid-cols-12 mt-4",children:[t.jsx("div",{className:"col-span-10",children:t.jsx(te,{disabled:!0,placeholder:J,className:"mb-1 mt-1"})}),t.jsx("div",{className:"col-span-2 mt-1 text-center",children:t.jsxs(Je,{children:[t.jsx(Ve,{asChild:!0,children:t.jsx(le,{className:"ml-2",variant:"outline",children:"JSON"})}),t.jsxs(He,{className:"sm:max-w-[550px] bg-white",children:[t.jsxs(Ye,{children:[t.jsx(Qe,{children:r("CreditOfferEditor:existingCreditOfferJSON")}),t.jsx(Ke,{children:r("CreditOfferEditor:currentBlockchainData")})]}),t.jsxs("div",{className:"grid grid-cols-1",children:[t.jsx("div",{className:"col-span-1",children:t.jsx(Xr,{className:"h-72 rounded-md border",children:t.jsx("pre",{children:JSON.stringify(Z,null,2)})})}),t.jsxs("div",{className:"col-span-1 mt-3",children:[t.jsx(le,{variant:"outline",onClick:()=>{kr(JSON.stringify(Z,null,4))},children:r("DeepLinkDialog:tabsContent.copyOperationJSON")}),t.jsx(or,{variant:"outline",classnamecontents:"ml-3",type:"button",text:r("CreditOfferEditor:viewOnBlockSights"),hyperlink:"bitshares"===y.chain?`https://blocksights.info/#/objects/${J}`:`https://blocksights.info/#/objects/${J}?network=testnet`})]})]})]})]})})]})}),t.jsx(xe,{children:r("CreditOfferEditor:viewingExistingOffer")})]})})})]}):null,t.jsx(ue,{control:n.control,name:"targetAsset",render:({field:e})=>t.jsxs(he,{children:[t.jsx(me,{children:r("CreditOfferEditor:assetToLend")}),t.jsx(pe,{children:t.jsxs("div",{className:"grid grid-cols-8 mt-4",children:[t.jsxs("div",{className:"col-span-1 ml-5",children:[l&&G?null:t.jsx(cr,{children:t.jsx(fr,{children:"?"})}),G?t.jsx(cr,{children:t.jsx(fr,{children:t.jsx("div",{className:"text-sm",children:G.bitasset_data_id?"MPA":"UIA"})})}):null]}),t.jsxs("div",{className:"col-span-5",children:[l&&G?null:t.jsx(te,{disabled:!0,placeholder:"Bitshares asset (1.3.x)",className:"mb-1 mt-1"}),G?t.jsx(te,{disabled:!0,placeholder:`${G.symbol} (${G.id})`,className:"mb-1 mt-1"}):null]}),t.jsx("div",{className:"col-span-2 mt-1 ml-3 text-center",children:t.jsx(qr,{assetSymbol:l??"",assetData:null,storeCallback:o,otherAsset:null,marketSearch:T,type:null})})]})}),t.jsx(xe,{children:r("CreditOfferEditor:lendingAssetDescription")}),t.jsx(Ue,{children:G&&H&&!H.map((e=>e.asset_id)).includes(G.id)?r("Transfer:noAssetInAccount",{username:y.username}):null})]})}),t.jsx(ue,{control:n.control,name:"lendingAmount",render:({field:e})=>t.jsxs(he,{children:[t.jsx(me,{children:r("CreditOfferEditor:amountToLend")})," ",t.jsx(pe,{onChange:e=>{const r=e.target.value,t=G?G.precision:2;new RegExp(`^[0-9]*\\.?[0-9]{0,${t}}$`).test(r)&&d(r)},children:t.jsx(te,{value:c,placeholder:c,className:"mb-1 w-3/4"})}),t.jsx(xe,{children:r("CreditOfferEditor:lendingAmountDescription")})]})}),t.jsx(ue,{control:n.control,name:"rate",render:({field:e})=>t.jsxs(he,{children:[t.jsx(me,{children:r("CreditOfferEditor:lendingRate")}),t.jsx(pe,{children:t.jsxs("span",{className:"grid grid-cols-12",children:[t.jsxs("span",{className:"col-span-9",children:[t.jsx(te,{value:`${u} %`,placeholder:`${u} %`,disabled:!0,className:"mb-1"}),t.jsx(zr,{className:"mt-3",defaultValue:[u],max:100,min:1,step:.01,onValueChange:e=>{C(e[0])}},`Slider${u}`)]}),t.jsx("span",{className:"col-span-3 ml-3 text-center",children:t.jsxs(Pe,{children:[t.jsx(Be,{asChild:!0,children:t.jsxs("span",{onClick:()=>{event.preventDefault()},className:"inline-block border border-grey rounded pl-4 pb-1 pr-4 text-lg",children:[t.jsx(Ae,{children:r("CreditOfferEditor:editLendingRate")})," "]})}),t.jsxs(Ie,{children:[t.jsx(Ae,{children:r("CreditOfferEditor:newLendingRate")})," ",t.jsx(te,{placeholder:u,className:"mb-2 mt-1",onChange:e=>{const r=e.target.value;r&&r.length&&/^[0-9]*\.?[0-9]{0,2}$/.test(r)&&(r>=.01&&r<=100?f(r):r>100?f(100):r<.01&&f(.01))}})]})]})})]})}),t.jsx(xe,{children:r("CreditOfferEditor:lendingRateDescription")})]})}),t.jsxs("span",{className:"grid grid-cols-12 mt-3 mb-3",children:[t.jsx("span",{className:"col-span-4",children:t.jsx(ue,{control:n.control,name:"repaymentPeriod",render:({field:e})=>t.jsxs(he,{children:[t.jsx(me,{children:r("CreditOfferEditor:repaymentPeriod")}),t.jsx(pe,{onValueChange:e=>{m(e)},children:t.jsxs(Rr,{children:[t.jsx(Fr,{className:"mb-3 w-3/4",children:t.jsx(Mr,{placeholder:r("CreditOfferEditor:placeholder1hr")})}),t.jsxs(Lr,{className:"bg-white",children:[t.jsx(Ce,{value:"12hr",children:r("CreditOfferEditor:12hours")}),t.jsx(Ce,{value:"24hr",children:r("CreditOfferEditor:24hours")}),t.jsx(Ce,{value:"3d",children:r("CreditOfferEditor:3days")}),t.jsx(Ce,{value:"7d",children:r("CreditOfferEditor:7days")}),t.jsx(Ce,{value:"30d",children:r("CreditOfferEditor:30days")}),t.jsx(Ce,{value:"90d",children:r("CreditOfferEditor:90days")}),t.jsx(Ce,{value:"365d",children:r("CreditOfferEditor:365days")}),t.jsx(Ce,{value:"730d",children:r("CreditOfferEditor:730days")}),t.jsx(Ce,{value:"1825d",children:r("CreditOfferEditor:1825days")})]})]})}),t.jsx(xe,{children:r("CreditOfferEditor:maximumDuration")}),t.jsx(Ue,{})]})})}),t.jsx("span",{className:"col-span-4",children:t.jsx(ue,{control:n.control,name:"minimumAmount",render:({field:e})=>t.jsxs(he,{children:[t.jsx(me,{children:r("CreditOfferEditor:minimumAmount")}),t.jsx(pe,{onChange:e=>{const r=e.target.value;/^[0-9]*\.?[0-9]*$/.test(r)&&r>0&&x(r)},children:t.jsx(te,{value:p,placeholder:p,className:"mb-1 w-3/4"})}),t.jsx(xe,{children:r("CreditOfferEditor:minimumBorrowableAmount")})," "]})})}),t.jsx("span",{className:"col-span-4",children:t.jsx(ue,{control:n.control,name:"minimumAmount",render:({field:e})=>t.jsxs(he,{children:[t.jsx(me,{children:r("CreditOfferEditor:expirationDate")}),t.jsx(pe,{children:t.jsxs(Pe,{children:[t.jsx(Be,{asChild:!0,children:t.jsxs(le,{variant:"outline",className:Ar("w-[240px] justify-start text-left font-normal",!g&&"text-muted-foreground"),children:[t.jsx(Dr,{className:"mr-2 h-4 w-4"}),g?Vr(g,"PPP"):t.jsx("span",{children:r("LimitOrderCard:expiry.pickDate")})]})}),t.jsx(Ie,{className:"w-auto p-0",align:"start",children:t.jsx(Hr,{mode:"single",selected:g,onSelect:e=>{new Date(e)<new Date?j(new Date(Date.now()+864e5)):j(e)},initialFocus:!0})})]})}),t.jsx(xe,{children:r("CreditOfferEditor:creditOfferEnds")})]})})})]}),t.jsx(ue,{control:n.control,name:"acceptedCollateral",render:({field:e})=>t.jsxs(he,{children:[t.jsx(me,{children:r("CreditOfferEditor:acceptedCollateral")}),t.jsx(pe,{children:t.jsxs("span",{className:"grid grid-cols-12",children:[t.jsx("span",{className:"col-span-9 border border-grey rounded",children:t.jsx(Xe,{height:210,itemCount:N.length,itemSize:80,className:"w-full",children:ae})}),t.jsx("span",{className:"col-span-3 ml-3 text-center",children:t.jsx(Kr,{chosenAssets:N,lendingAsset:G&&G.symbol?G.symbol:"",marketSearch:T,storeCallback:v})})]})}),t.jsx(xe,{children:r("CreditOfferEditor:acceptedCollateralDescription")})]})}),t.jsx(ue,{control:n.control,name:"acceptedCollateral",render:({field:e})=>t.jsxs(he,{children:[t.jsx(me,{children:r("CreditOfferEditor:preApprovedUsers")}),t.jsx(pe,{children:t.jsxs("span",{className:"grid grid-cols-12",children:[t.jsx("span",{className:"col-span-9 border border-grey rounded",children:t.jsx(Xe,{height:210,itemCount:b.length,itemSize:100,className:"w-full",children:oe})}),t.jsx("span",{className:"col-span-3 ml-3 text-center",children:t.jsxs(Je,{open:w,onOpenChange:e=>{S(e)},children:[t.jsx(Ve,{asChild:!0,children:t.jsxs(le,{variant:"outline",className:"ml-3 mt-1",children:["➕ ",r("CreditOfferEditor:addUser")]})}),t.jsxs(He,{className:"sm:max-w-[375px] bg-white",children:[t.jsxs(Ye,{children:[t.jsxs(Qe,{children:[y&&y.chain?null:r("Transfer:bitsharesAccountSearch"),y&&"bitshares"===y.chain?r("Transfer:bitsharesAccountSearchBTS"):null,y&&"bitshares"!==y.chain?r("Transfer:bitsharesAccountSearchTEST"):null]}),t.jsx(Ke,{children:r("Transfer:searchingForAccount")})]}),t.jsx(Jr,{chain:y&&y.chain?y.chain:"bitshares",excludedUsers:y&&y.username&&y.username.length?[y]:[],setChosenAccount:e=>{e&&!b.find((r=>r.id===e.id))&&(e.amount=p??1,O(b&&b.length?[b].concat([e]):[e])),S(!1)}})]})]})})]})}),t.jsx(xe,{children:r("CreditOfferEditor:limitBorrowers")})]})}),t.jsx(ue,{control:n.control,disabled:!0,name:"fee",render:({field:e})=>t.jsxs(he,{children:[t.jsx(me,{children:r("CreditOfferEditor:networkFee")}),t.jsx(xe,{children:r("CreditOfferEditor:broadcastCost")}),t.jsx(pe,{children:t.jsx(te,{className:"w-3/4",disabled:!0,value:`${M} BTS`,placeholder:1})}),y.id===y.referrer?t.jsx(Ue,{children:r("LimitOrderCard:fee.ltmRebate",{rebate:.8*M})}):null]})}),t.jsx(le,{className:"mt-7 mb-1",variant:"outline",type:"submit",children:r("CreditOfferEditor:submit")})]})})})]}),ne&&i?t.jsx(Ur,{operationName:J?"credit_offer_update":"credit_offer_create",username:y.username,usrChain:y.chain,userID:y.id,dismissCallback:a,headerText:J?r("CreditOfferEditor:updatingCreditOffer",{offerID:J}):r("CreditOfferEditor:creatingCreditOffer",{lendingAmount:c,symbol:G.symbol}),trxJSON:ne??[]},J?`UpdatingCreditOffer${J}`:`CreatingCreditOffer${c}${G.symbol}`):null]}),t.jsx("div",{className:"grid grid-cols-1 gap-3 mt-5",children:t.jsxs(De,{children:[t.jsxs(ye,{className:"pb-0",children:[t.jsx(ke,{children:r("CreditOfferEditor:risksTitle")}),t.jsx(Te,{children:r("CreditOfferEditor:risksDescription")})]}),t.jsx(ar,{className:"text-sm",children:t.jsxs("ul",{className:"ml-2 list-disc [&>li]:mt-2 pl-2",children:[t.jsx("li",{children:r("CreditOfferEditor:risksPoint1")}),t.jsx("li",{children:r("CreditOfferEditor:risksPoint2")}),t.jsx("li",{children:r("CreditOfferEditor:risksPoint3")}),t.jsx("li",{children:r("CreditOfferEditor:risksPoint4")}),t.jsx("li",{children:r("CreditOfferEditor:risksPoint5")}),t.jsx("li",{children:r("CreditOfferEditor:risksPoint6")})]})})]})})]})}export{kt as default};